System.register(["./index-legacy-CQo2J8Wp.js","./index-legacy-C52fahb7.js"],function(e,a){"use strict";var o,t,n,i,r,s,l,c,d,p;return{setters:[e=>{o=e.u,t=e.r,n=e.j,i=e.d,r=e.i,s=e.b},e=>{l=e.v,c=e.q,d=e.t,p=e.b}],execute:function(){var a=document.createElement("style");a.textContent='.flashcard-container{background-color:transparent;width:100%;height:480px;perspective:2500px;cursor:pointer;margin:20px 0;display:flex;align-items:center;justify-content:center;position:relative}.flashcard-container:before{content:"";position:absolute;width:140%;height:140%;background:radial-gradient(circle at center,var(--glow-indigo-soft),transparent 60%);z-index:-1;filter:blur(40px);animation:ambientPulse 8s ease-in-out infinite alternate}@keyframes ambientPulse{0%{opacity:.4;transform:scale(1)}to{opacity:.7;transform:scale(1.1)}}.flashcard-inner{position:relative;width:100%;height:100%;max-width:520px;transition:transform var(--transition-haptic);transform-style:preserve-3d}.flashcard-container.flipped .flashcard-inner{transform:rotateY(180deg)}.flashcard-front,.flashcard-back{position:absolute;width:100%;height:100%;background:rgba(255,255,255,.95);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.8);box-shadow:0 4px 30px rgba(0,0,0,.05),inset 0 0 20px rgba(99,102,241,.02);border-radius:24px;padding:60px 40px;display:flex;flex-direction:column;justify-content:center;align-items:center;backface-visibility:hidden;-webkit-backface-visibility:hidden;transition:var(--transition-haptic)}.flashcard-back{transform:rotateY(180deg)}.flashcard-front h2{font-size:3.8rem;font-weight:800;letter-spacing:-.05em;color:var(--ion-text-color);margin:0;text-align:center}.flashcard-back h2{font-size:2.5rem;font-weight:700;color:var(--glow-indigo);margin:0;text-align:center}.flip-hint{position:absolute;bottom:40px;font-size:.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;letter-spacing:.15em}.example-sentence{margin-top:48px;padding:24px;background:rgba(99,102,241,.03);border-radius:16px;border:1px solid rgba(99,102,241,.1);width:100%}.example-tagalog-row{display:flex;align-items:center;justify-content:space-between;gap:8px}.example-tagalog{font-size:1.15rem;font-weight:700;color:var(--ion-text-color);margin-bottom:4px;display:block;flex:1}.example-audio-group{display:flex;gap:2px}.example-audio-btn{--padding-start: 6px;--padding-end: 6px;min-height:28px;margin:0}.example-translation{font-size:.95rem;color:#64748b;font-weight:500}.audio-btn-group{position:absolute;top:32px;left:24px;display:flex;gap:4px;background:rgba(248,250,252,.9);border-radius:14px;padding:4px}.audio-btn,.slow-audio-btn{--background: transparent;--color: #64748b;--border-radius: 10px;height:36px;width:36px;--padding-start: 0;--padding-end: 0;margin:0;transition:var(--transition-haptic)}.audio-btn:hover,.slow-audio-btn:hover{--background: var(--glow-indigo);--color: white;transform:scale(1.1)}.bookmark-btn{position:absolute;top:32px;--background: rgba(248, 250, 252, .8);--color: #64748b;--border-radius: 12px;height:44px;width:44px;--padding-start: 0;--padding-end: 0;margin:0;transition:var(--transition-haptic)}.bookmark-btn:hover{--background: var(--glow-indigo);--color: white;transform:scale(1.1)}.bookmark-btn{right:32px}.playing-icon{color:#fff}@media (prefers-color-scheme: dark){.flashcard-front,.flashcard-back{background:rgba(17,24,39,.8);border-color:rgba(255,255,255,.05);box-shadow:0 4px 60px rgba(0,0,0,.5)}.example-sentence{background:rgba(255,255,255,.02)}}.progress-indicator{text-align:center;margin:100px 0 20px;font-weight:800;color:#64748b;letter-spacing:.15em;text-transform:uppercase;font-size:.65rem;display:block}.instruction{text-align:center;color:var(--glow-indigo);font-weight:700;margin-top:20px;font-size:.9rem;letter-spacing:-.01em;display:block;opacity:.9}.navigation-buttons{display:flex;justify-content:center;padding:32px 32px 48px;gap:16px;background:transparent;position:relative}.navigation-buttons ion-button{margin:0;--border-radius: 14px;font-weight:700;height:52px;text-transform:none;font-size:1rem;--box-shadow: 0 4px 15px rgba(0, 0, 0, .05);--color: #1e293b;--background: #ffffff;border:1px solid rgba(0,0,0,.02);transition:var(--transition-haptic)}.navigation-buttons ion-button:hover{transform:translateY(-2px);--box-shadow: 0 10px 20px rgba(0, 0, 0, .08)}.navigation-buttons ion-button[color=success]{--background: var(--glow-indigo);--color: white;border:none}@media (prefers-color-scheme: dark){.navigation-buttons ion-button{--background: #111827;--color: white}}ion-footer ion-toolbar{--background: transparent;--border-width: 0}@keyframes shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.shake{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}@keyframes success-pop{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.success-pop{animation:success-pop .4s ease-out}.celebration-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;padding:40px 20px}.celebration-icon{font-size:80px;margin-bottom:24px;color:var(--ion-color-success);filter:drop-shadow(0 0 12px rgba(var(--ion-color-success-rgb),.3))}\n/*$vite$:1*/',document.head.appendChild(a);const g="tagalog_bookmarks",h=e("g",()=>{const e=localStorage.getItem(g);if(!e)return[];try{return JSON.parse(e)}catch(a){return console.warn("Failed to parse bookmarks",a),[]}}),m=e=>h().includes(e),f=e=>m(e)?((e=>{const a=h(),o=a.indexOf(e);-1!==o&&(a.splice(o,1),localStorage.setItem(g,JSON.stringify(a)))})(e),!1):((e=>{const a=h();a.includes(e)||(a.push(e),localStorage.setItem(g,JSON.stringify(a)))})(e),!0);e("F",({id:e,tagalog:a,english:g,zhTW:h,zhCN:x,example:u})=>{const{t:b,i18n:w}=o(),[y,k]=t.useState(!1),[v,j]=t.useState(!1),[S,N]=t.useState(!1);t.useEffect(()=>{N(m(e))},[e]);const C=a=>{a.stopPropagation();const o=f(e);N(o)},P=(()=>{switch(w.language){case"zh-TW":return{text:h||g,lang:"zh-TW",example:(null==u?void 0:u.zhTW)||(null==u?void 0:u.english)};case"zh-CN":return{text:x||g,lang:"zh-CN",example:(null==u?void 0:u.zhCN)||(null==u?void 0:u.english)};default:return{text:g,lang:"en-US",example:null==u?void 0:u.english}}})(),T=e=>e.toLowerCase().replace(/[?!.,;:'"()\/\\]/g,"").replace(/\s+/g,"_").trim(),z=async(e,a,o)=>{if(e.stopPropagation(),!v){j(!0);try{if("tl-PH"===o){try{const e=T(a),o=`/ionic_demo/audio/${e}.mp3`,t=new Audio(o);return void(await new Promise((e,a)=>{t.onended=()=>e(),t.onerror=()=>a("Local audio not found"),t.oncanplaythrough=()=>{t.play().catch(a)},t.load()}))}catch(t){console.warn("Local audio not found, trying online TTS",t)}try{const e=await fetch("https://tts-server-479744148035.asia-east1.run.app/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a,languageCode:"fil-PH",voiceName:"fil-PH-Standard-A"})});if(e.ok){const a=await e.json();if(a.audioContent){const e=new Audio(`data:audio/mp3;base64,${a.audioContent}`);return void(await new Promise((a,o)=>{e.onended=()=>a(),e.onerror=()=>o("Audio playback failed"),e.play().catch(o)}))}}}catch(t){console.warn("Google Cloud TTS Serverless failed, falling back",t)}}let e=o;"tl-PH"===o&&(e="tl");const n=`https://translate.google.com/translate_tts?ie=UTF-8&client=gtx&tl=${e}&q=${encodeURIComponent(a)}`,i=new Audio(n);await new Promise((e,a)=>{i.onended=()=>e(),i.onerror=()=>a("Audio playback failed"),i.play().catch(a)})}catch(n){if(console.warn("Google TTS failed, falling back to Web Speech API",n),"speechSynthesis"in window){window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(a);if("tl-PH"===o){const a=window.speechSynthesis.getVoices().find(e=>"tl-PH"===e.lang||"fil-PH"===e.lang||e.name.includes("Tagalog")||e.name.includes("Filipino"));a&&(e.voice=a)}e.lang=o,e.rate=.9,await new Promise(a=>{e.onend=()=>a(),e.onerror=()=>a(),window.speechSynthesis.speak(e)})}}finally{j(!1)}}},A=async(e,a)=>{if(e.stopPropagation(),!v){j(!0);try{try{const e=T(a),o=`/ionic_demo/audio/${e}_slow.mp3`,t=new Audio(o);return void(await new Promise((e,a)=>{t.onended=()=>e(),t.onerror=()=>a("Local slow audio not found"),t.oncanplaythrough=()=>{t.play().catch(a)},t.load()}))}catch(o){console.warn("Local slow audio not found, trying online TTS",o)}const e=await fetch("https://tts-server-479744148035.asia-east1.run.app/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a,languageCode:"fil-PH",voiceName:"fil-PH-Standard-A",speakingRate:.6})});if(e.ok){const a=await e.json();if(a.audioContent){const e=new Audio(`data:audio/mp3;base64,${a.audioContent}`);await new Promise((a,o)=>{e.onended=()=>a(),e.onerror=()=>o("Audio playback failed"),e.play().catch(o)})}}}catch(t){console.error("Slow TTS failed:",t)}finally{j(!1)}}};return n.jsx("div",{className:"flashcard-container "+(y?"flipped":""),onClick:()=>k(!y),children:n.jsxs("div",{className:"flashcard-inner",children:[n.jsxs("div",{className:"flashcard-front",children:[n.jsxs("div",{className:"audio-btn-group",children:[n.jsx(i,{fill:"clear",className:"audio-btn",onClick:e=>z(e,a,"tl-PH"),disabled:v,title:"Normal speed",children:v?n.jsx(r,{name:"dots",color:"primary"}):n.jsx(s,{icon:l,slot:"icon-only",color:"primary"})}),n.jsx(i,{fill:"clear",className:"slow-audio-btn",onClick:e=>A(e,a),disabled:v,title:"Slow speed (learner mode)",children:n.jsx(s,{icon:c,slot:"icon-only",color:"primary"})})]}),n.jsx(i,{fill:"clear",className:"bookmark-btn",onClick:C,children:n.jsx(s,{icon:S?d:p,slot:"icon-only",color:"primary"})}),n.jsx("h2",{children:a}),n.jsx("p",{className:"flip-hint",children:b("flashcard.tapToSeeTranslation")})]}),n.jsxs("div",{className:"flashcard-back",children:[n.jsx(i,{fill:"clear",className:"audio-btn",onClick:e=>z(e,P.text,P.lang),disabled:v,children:v?n.jsx(r,{name:"dots",color:"light"}):n.jsx(s,{icon:l,slot:"icon-only",color:"light"})}),n.jsx(i,{fill:"clear",className:"bookmark-btn",onClick:C,children:n.jsx(s,{icon:S?d:p,slot:"icon-only",color:"light"})}),n.jsx("h2",{children:P.text}),u&&n.jsxs("div",{className:"example-sentence",children:[n.jsxs("div",{className:"example-tagalog-row",children:[n.jsx("p",{className:"example-tagalog",children:u.tagalog}),n.jsxs("div",{className:"example-audio-group",children:[n.jsx(i,{fill:"clear",size:"small",className:"example-audio-btn",onClick:e=>z(e,u.tagalog,"tl-PH"),disabled:v,title:"Normal speed",children:v?n.jsx(r,{name:"dots",color:"medium"}):n.jsx(s,{icon:l,color:"medium"})}),n.jsx(i,{fill:"clear",size:"small",className:"example-audio-btn",onClick:e=>A(e,u.tagalog),disabled:v,title:"Slow speed",children:n.jsx(s,{icon:c,color:"medium"})})]})]}),n.jsx("p",{className:"example-translation",children:P.example})]}),!u&&n.jsx("p",{className:"flip-hint",children:b("flashcard.tapToSeeTagalog")})]})]})})})}}});
