System.register(["./index-legacy-BHWlXoxH.js","./index-legacy-DgtzNASK.js","./CommonHeader-legacy-C_F9Cklg.js","./lessons-legacy-ABE7m_Co.js"],function(e,t){"use strict";var a,n,o,s,i,r,l,c,d,p,x,f,g,m,h,b;return{setters:[e=>{a=e.u,n=e.r,o=e.x,s=e.j,i=e.I,r=e.b,l=e.c,c=e.e},e=>{d=e.B,p=e.G,x=e.H,f=e.I,g=e.r,m=e.h},e=>{h=e.C},e=>{b=e.l}],execute:function(){var t=document.createElement("style");t.textContent=".falling-content{--background: #f8fafc}.game-area{height:100%;display:flex;flex-direction:column;position:relative;overflow:hidden;background:linear-gradient(180deg,#eef2ff,#fff)}.game-stats-bar{position:absolute;top:10px;left:0;right:0;display:flex;justify-content:space-between;padding:0 20px;z-index:10}.stat-box{background:#fff;padding:8px 16px;border-radius:20px;box-shadow:0 4px 12px rgba(0,0,0,.05);display:flex;align-items:center;gap:8px;font-weight:700;color:var(--glow-indigo)}.stat-box.lives{gap:4px}.life-active{color:#ef4444}.life-lost{color:#e2e8f0}.falling-word-container{position:absolute;left:50%;transform:translate(-50%);top:-60px;animation-name:fall;animation-timing-function:linear;animation-fill-mode:forwards;z-index:5;pointer-events:none}.falling-word-bubble{background:#fff;padding:12px 24px;border-radius:30px;box-shadow:0 8px 20px rgba(99,102,241,.2);font-size:1.5rem;font-weight:800;color:#1e293b;border:2px solid var(--glow-indigo);white-space:nowrap}@keyframes fall{0%{top:-60px}to{top:calc(100% - 240px);opacity:0;transform:translate(-50%) scale(.8)}}.options-dock{position:absolute;bottom:0;left:0;right:0;padding:20px;background:#fff;border-top-left-radius:24px;border-top-right-radius:24px;box-shadow:0 -4px 20px rgba(0,0,0,.05);display:grid;grid-template-columns:1fr 1fr;gap:12px;z-index:20;height:220px}.option-tile{background:#f1f5f9;border:none;border-radius:16px;padding:10px;font-size:1rem;font-weight:600;color:#475569;transition:all .2s;display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 2px #cbd5e1}.option-tile:active{transform:translateY(2px);box-shadow:none;background:#e2e8f0}.splash-screen,.game-over-screen{height:100%;display:flex;align-items:center;justify-content:center;padding:20px;text-align:center}.splash-content{max-width:400px;width:100%}.icon-circle{width:80px;height:80px;background:linear-gradient(135deg,#6366f1,#8b5cf6);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;color:#fff;font-size:32px;box-shadow:0 10px 25px rgba(99,102,241,.3)}.splash-content h1{font-size:2rem;font-weight:800;color:#1e293b;margin-bottom:8px}.splash-content p{color:#64748b;margin-bottom:32px}.start-btn{--background: var(--glow-indigo);--box-shadow: 0 8px 20px rgba(99, 102, 241, .3);font-weight:700}.game-over-content{background:#fff;padding:32px;border-radius:24px;box-shadow:0 20px 40px rgba(0,0,0,.1);width:100%;max-width:340px}.result-trophy{font-size:64px;color:#fbbf24;margin-bottom:16px}.final-score-display{background:#f8fafc;padding:16px;border-radius:16px;margin:24px 0;border:1px solid #e2e8f0}.final-score-display span{display:block;font-size:.9rem;color:#64748b;margin-bottom:4px}.final-score-display strong{font-size:2.5rem;color:#1e293b;font-weight:800}.action-buttons{display:flex;flex-direction:column;gap:12px}\n/*$vite$:1*/",document.head.appendChild(t);const u=e=>{const t=[...e];for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t};e("default",()=>{const{t:e,i18n:t}=a(),[j,v]=n.useState(!1),[w,y]=n.useState(!1),[k,N]=n.useState(0),[z,C]=n.useState(3),[S,M]=n.useState(null),[H,A]=n.useState([]),[B,T]=n.useState(5e3),[$,E]=n.useState(0),I=n.useRef(b.flatMap(e=>e.cards)),R=n.useRef(null),W=n.useCallback(e=>{switch(t.language){case"zh-TW":return e.zhTW||e.english;case"zh-CN":return e.zhCN||e.english;default:return e.english}},[t.language]),Y=()=>{N(0),C(3),T(5e3),v(!0),y(!1),D(!0)},D=n.useCallback((e=!1)=>{if(!e&&!j&&0===k&&3===z)return;const t=I.current,a=t[Math.floor(Math.random()*t.length)];M(a);const n=W(a),o=t.filter(e=>e.id!==a.id),s=u(o).slice(0,3).map(e=>W(e));A(u([n,...s])),E(e=>e+1),k>0&&k%5==0&&T(e=>Math.max(1500,.9*e))},[W,j,z,k]),G=n.useCallback(()=>{w||(C(e=>{const t=e-1;return t<=0&&(y(!0),v(!1)),t}),z>1&&D())},[w,z,D]);return o(()=>{v(!1)}),s.jsxs(i,{children:[s.jsx(h,{title:e("falling.title"),showBackButton:!0,defaultHref:"/home"}),s.jsxs(r,{className:"falling-content",scrollY:!1,children:[!w&&j&&s.jsxs("div",{className:"game-area",ref:R,children:[s.jsxs("div",{className:"game-stats-bar",children:[s.jsxs("div",{className:"stat-box",children:[s.jsx(l,{icon:d}),s.jsx("span",{children:k})]}),s.jsx("div",{className:"stat-box lives",children:[...Array(3)].map((e,t)=>s.jsx(l,{icon:p,className:t<z?"life-active":"life-lost"},t))})]}),S&&s.jsx("div",{className:"falling-word-container",style:{animationDuration:`${B}ms`},onAnimationEnd:()=>{G()},children:s.jsx("div",{className:"falling-word-bubble",children:S.tagalog})},$),s.jsx("div",{className:"options-dock",children:H.map((e,t)=>s.jsx("button",{className:"option-tile",onClick:()=>{return t=e,void(S&&!w&&(t===W(S)?(N(e=>e+1),D()):G()));var t},children:e},t))})]}),!j&&!w&&s.jsx("div",{className:"splash-screen",children:s.jsxs("div",{className:"splash-content",children:[s.jsx("div",{className:"icon-circle",children:s.jsx(l,{icon:x})}),s.jsx("h1",{children:e("falling.title")}),s.jsx("p",{children:e("falling.description")}),s.jsxs(c,{expand:"block",shape:"round",className:"start-btn",onClick:Y,children:[s.jsx(l,{icon:f,slot:"start"}),e("common.start")]})]})}),w&&s.jsx("div",{className:"game-over-screen",children:s.jsxs("div",{className:"game-over-content",children:[s.jsx(l,{icon:d,className:"result-trophy"}),s.jsx("h2",{children:e("common.gameOver")}),s.jsxs("div",{className:"final-score-display",children:[s.jsx("span",{children:e("common.score")}),s.jsx("strong",{children:k})]}),s.jsxs("div",{className:"action-buttons",children:[s.jsxs(c,{expand:"block",onClick:Y,children:[s.jsx(l,{icon:g,slot:"start"}),e("common.playAgain")]}),s.jsxs(c,{expand:"block",fill:"outline",routerLink:"/home",children:[s.jsx(l,{icon:m,slot:"start"}),e("common.backToHome")]})]})]})})]})]})})}}});
